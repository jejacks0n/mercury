!function(){var e={}.hasOwnProperty,t=function(t,r){function n(){this.constructor=t}for(var o in r)e.call(r,o)&&(t[o]=r[o]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t};Mercury.Region.Html=function(e){function r(){var e;try{window.rangy.init()}catch(t){return e=t,this.notify(this.t("requires Rangy")),!1}r.__super__.constructor.apply(this,arguments)}return t(r,e),r.define("Mercury.Region.Html","html"),r.include(Mercury.Region.Modules.DropIndicator),r.include(Mercury.Region.Modules.HtmlSelection),r.include(Mercury.Region.Modules.SelectionValue),r.include(Mercury.Region.Modules.ContentEditable),r.include(Mercury.Region.Modules.Snippetable),r.supported=Mercury.support.wysiwyg,r.events={keydown:"onKeyEvent",paste:"onPaste"},r.prototype.onDropFile=function(e){var t,r=this;return t=new(Mercury[this.config("interface:uploader")])(e,{mimeTypes:this.options.mimeTypes}),t.on("uploaded",function(e){return r.focus(),r.handleAction("file",e)})},r.prototype.onDropItem=function(){return this.pushHistory()},r.prototype.onPaste=function(e){return console.debug("pasted",e)},r.prototype.onKeyEvent=function(e){if(!(e.keyCode>=37&&e.keyCode<=40||e.metaKey&&90===e.keyCode)){if(e.metaKey)switch(e.keyCode){case 66:return this.prevent(e),this.handleAction("bold");case 73:return this.prevent(e),this.handleAction("italic");case 85:return this.prevent(e),this.handleAction("underline")}return this.pushHistory(e.keyCode)}},r}(Mercury.Region),Mercury.Region.Html.addToolbar({defined:{style:["Style",{plugin:"styles"}],sep:" ",block:["Block Format",{plugin:"blocks"}]},color:{bgcolor:["Background Color",{plugin:"color"}],sep:" ",color:["Text Color",{plugin:"color"}]},decoration:{bold:["Bold"],italic:["Italicize"],strike:["Strikethrough"],underline:["Underline"]},script:{subscript:["Subscript"],superscript:["Superscript"]},justify:{justifyLeft:["Align Left"],justifyCenter:["Center"],justifyRight:["Align Right"],justifyFull:["Justify Full"]},list:{unorderedList:["Unordered List"],orderedList:["Numbered List"]},indent:{indent:["Increase Indentation"],outdent:["Decrease Indentation"]},rules:{rule:["Horizontal Rule",{title:"Insert a horizontal rule"}]},extra:{clean:["Remove Formatting",{title:"Remove formatting for the selection"}],sep:" ",edit:["Edit HTML",{title:"Edit the HTML content"}]},table:{rowBefore:["Insert Table Row",{title:"Insert a table row before the cursor"}],rowAfter:["Insert Table Row",{title:"Insert a table row after the cursor"}],rowDelete:["Delete Table Row",{title:"Delete this table row"}],colBefore:["Insert Table Column",{title:"Insert a table column before the cursor"}],colAfter:["Insert Table Column",{title:"Insert a table column after the cursor"}],colDelete:["Delete Table Column",{title:"Delete this table column"}],sep:" ",colIncrease:["Increase Cell Columns",{title:"Increase the cells colspan"}],colDecrease:["Decrease Cell Columns",{title:"Decrease the cells colspan and add a new cell"}],rowIncrease:["Increase Cell Rows",{title:"Increase the cells rowspan"}],rowDecrease:["Decrease Cell Rows",{title:"Decrease the cells rowspan and add a new cell"}]}}),Mercury.Region.Html.addAction({bold:function(){return this.toggleWrapSelectedWordsInClass("red")},italic:function(){return this.toggleWrapSelectedWordsInClass("highlight")},underline:function(){return this.toggleWrapSelectedWordsInClass("blue")},rule:function(){return this.replaceSelection("<hr/>")},style:function(){},link:function(e){return this.html(e.asHtml())},table:function(e){return this.replaceSelection(e.asHtml())}})}.call(this);