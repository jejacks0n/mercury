/*!
The Image region allows you to have a replaceable image region on your page. It provided the ability to drag/drop images
from the desktop -- which will get uploaded (and probably processed by your server) and will then replace the existing
image with the one that was uploaded.
*/
(function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};Mercury.Region.Image=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.define("Mercury.Region.Image","image"),n.include(Mercury.Region.Modules.DropIndicator),n.supported=!0,n.prototype.tag="img",n.prototype.events={mousedown:"onMousedown"},n.prototype.value=function(e){return e===null||typeof e=="undefined"?this.attr("src"):this.attr("src",e)},n.prototype.onMousedown=function(e){return e.preventDefault(),this.el.trigger("focus")},n.prototype.onDropFile=function(e){var t,n=this;return t=new Mercury.Uploader(e,{mimeTypes:this.config("regions:image:mimeTypes")}),t.on("uploaded",function(e){return n.focus(),n.handleAction("file",e)})},n.prototype.onDropItem=function(e,t){var n;if(n=$("<div>").html(t.getData("text/html")).find("img").attr("src"))return e.preventDefault(),this.focus(),this.handleAction("image",{url:n})},n.prototype.actions={file:function(e){return this.value(e.get("url"))},image:function(e){return this.value(e.get("url"))}},n}(Mercury.Region)}).call(this);